<HomeScreen>:
    md_bg_color: 1, 1, 1, 1
    on_kv_post: app.theme_cls.primary_palette = 'Red'
    on_kv_post: app.theme_cls.primary_hue = 'A700'

    MDBoxLayout:
        orientation: 'horizontal'
        size_hint: 0.9, 0.9
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        RelativeLayout:
            size_hint: 0.2, 0.2
            pos_hint: {'top': 1, 'left': 1}

            # Add the Spinner widget for camera selection
            Spinner:
                id: camera_spinner  # Assign an id to the spinner
                text: 'Select Camera'
                values: app.get_available_cameras()
                size_hint: 1, 0.3
                pos_hint: {'top': 1, 'left': 1}
                on_text: app.on_camera_select(self.text)



        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 1, 1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            MDLabel:
                text: 'Camera Feed'
                halign: 'center'
                size_hint: 1, 0.1
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

#            MDRaisedButton:
#                text: 'Camera'
#                size_hint: 1, 0.8
#                md_bg_color: 0, 0, 0, 1
#                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            Camera:
                id: camera
                play: False
                index: int(camera_spinner.text) if camera_spinner.text.isdigit() else '0'
                size_hint: 1, 0.8
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}



            MDLabel:
                id: prediction_class
                text: 'Prediction Class'
                halign: 'center'
                size_hint: 1, 0.1
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        MDFloatLayout:
            size_hint: None, None
            width: 10

        MDBoxLayout:
            orientation: 'vertical'
            size_hint: None, 1
            width: 200
            spacing: 50
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            Image:
                source: 'images/mdz_logo.jpg'
                size_hint: 1, 0.2

            MDBoxLayout:
                orientation: 'vertical'
                size_hint: 1, 0.3
                spacing: 10
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                MDRaisedButton:
                    text: 'Train Model'
                    size_hint: 1, None
                    height: 50
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    on_release: app.train_model()

                MDRaisedButton:
                    text: 'Predict'
                    size_hint: 1, None
                    height: 50
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    on_release: app.predict()

                MDRaisedButton:
                    id: auto_prediction_button
                    text: 'Auto Predict'
                    size_hint: 1, None
                    height: 50
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    on_release: app.auto_predict()

                MDRaisedButton:
                    text: 'Reset'
                    size_hint: 1, None
                    height: 50
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    on_release: app.reset()

            MDStackLayout:
                id: object_button_box
                size_hint: 1, 0.4
                spacing: 10
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                MDRaisedButton:
                    text: 'Add Object'
                    size_hint: 1, None
                    height: 50
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    on_release: app.open_add_object_dialog()
